use crate::types::Lang;

pub struct Texts {
    pub start: &'static str,
    pub login_required: &'static str,
    pub session_expired: &'static str,
    pub usage_clockin: &'static str,
    pub invalid_clockin: &'static str,
    pub scheduled_clockin: &'static str,
    pub clocked_in_now: &'static str,
    pub clocked_in_scheduled: &'static str,
    pub scheduled_failed: &'static str,
    pub clocknow_error: &'static str,
    pub list_header: &'static str,
    pub list_empty: &'static str,
    pub status_pending: &'static str,
    pub status_executed: &'static str,
    pub status_failed: &'static str,
    pub cancel_usage: &'static str,
    pub cancel_not_found: &'static str,
    pub cancel_ok: &'static str,
    pub cancel_all_none: &'static str,
    pub cancel_all_ok: &'static str,
    pub cancel_fail: &'static str,
    pub data_header: &'static str,
    pub data_user_id: &'static str,
    pub data_location: &'static str,
    pub data_domain: &'static str,
    pub data_cookies: &'static str,
    pub data_cookie_hcmex: &'static str,
    pub data_cookie_device: &'static str,
    pub data_cookie_geo: &'static str,
    pub data_expires: &'static str,
    pub status_set: &'static str,
    pub status_missing: &'static str,
    pub set_timezone_usage: &'static str,
    pub set_timezone_invalid: &'static str,
    pub set_timezone_ok: &'static str,
    pub doc_invalid: &'static str,
    pub doc_too_large: &'static str,
    pub doc_parsed: &'static str,
    pub doc_error: &'static str,
    pub doc_details: &'static str,
    pub location_updated: &'static str,
}

const EN: Texts = Texts {
    start: "Welcome! ğŸ‘‹\n\nHow to start:\n1) Install the Chrome extension: https://chromewebstore.google.com/detail/get-cookiestxt-locally/cclelndahbckbenkjhflpdbgdldlbecc\n2) Export cookies as JSON\n3) Send the JSON file to this bot from Telegram Web: https://web.telegram.org/\n\nAfter login, you can update location by sending your location ğŸ“",
    login_required: "You have to log in with /start ğŸ”",
    session_expired: "Your session expired. Please log in again with /start ğŸ”",
    usage_clockin: "Usage: /clockin 14:00 or /clockin 5pm or /clockin 5:20pm â°",
    invalid_clockin: "Invalid time format ğŸ˜… Try /clockin 14:00, /clockin 5pm, or /clockin 5:20pm",
    scheduled_clockin: "âœ… Scheduled clock-in ğŸ‰\nTime: {time}\nTask ID: {id}",
    clocked_in_now: "Clocked in successfully âœ…",
    clocked_in_scheduled: "âœ… Clocked in (scheduled) ğŸ¯\nTime: {time}",
    scheduled_failed: "âŒ Scheduled clock-in failed: {error}",
    clocknow_error: "âŒ Error: {error}",
    list_header: "Here are your scheduled clock-ins ğŸ“‹",
    list_empty: "No scheduled clock-ins yet ğŸ’¤",
    status_pending: "pending",
    status_executed: "executed",
    status_failed: "failed",
    cancel_usage: "Usage: /cancel <task-id> or /cancel all ğŸ§¹",
    cancel_not_found: "I can't find that task id for you ğŸ¤”",
    cancel_ok: "Cancelled âœ…\nTask ID: {id}",
    cancel_all_none: "No pending tasks to cancel ğŸ’¤",
    cancel_all_ok: "Cancelled {count} task(s) âœ…ğŸ§¹",
    cancel_fail: "Couldn't cancel that task ğŸ˜¬",
    data_header: "ğŸ§¾ User data",
    data_user_id: "ğŸ†” User ID: {userId}",
    data_location: "ğŸ“ Location: {lat}, {long} (accuracy {accuracy})",
    data_domain: "ğŸ¢ Domain: {domain}",
    data_cookies: "ğŸª Cookies:",
    data_cookie_hcmex: "- _hcmex_key: {status}",
    data_cookie_device: "- device_id: {status}",
    data_cookie_geo: "- geo: {status}",
    data_expires: "â³ Expires: {expires}",
    status_set: "set",
    status_missing: "missing",
    set_timezone_usage: "Usage: /settimezone Europe/Madrid",
    set_timezone_invalid: "Invalid time zone. Example: /settimezone Europe/Madrid",
    set_timezone_ok: "âœ… Time zone updated to {tz}",
    doc_invalid: "Please send a .json file",
    doc_too_large: "File too large. Max 5MB.",
    doc_parsed: "âœ… Parsed successfully!\n\n{details}",
    doc_error: "âŒ Error: {error}",
    doc_details: "lat long {lat}, {long}\n{link}\n\ndomain {domain}\nexpires on {expires}",
    location_updated: "ğŸ“ Location updated!\n{link}",
};

const ES: Texts = Texts {
    start: "Bienvenido! ğŸ‘‹\n\nComo empezar:\n1) Instala la extension de Chrome: https://chromewebstore.google.com/detail/get-cookiestxt-locally/cclelndahbckbenkjhflpdbgdldlbecc\n2) Exporta tus cookies como archivo JSON\n3) Enviame el JSON usando Telegram Web: https://web.telegram.org/\n\nDespues de iniciar sesion, puedes actualizar tu ubicacion enviando una ubicacion ğŸ“",
    login_required: "Tienes que iniciar sesion con /start ğŸ”",
    session_expired: "Tu sesion expiro. Inicia sesion otra vez con /start ğŸ”",
    usage_clockin: "Uso: /clockin 14:00 o /clockin 5pm o /clockin 5:20pm â°",
    invalid_clockin: "Formato de hora invalido ğŸ˜… Prueba /clockin 14:00, /clockin 5pm, o /clockin 5:20pm",
    scheduled_clockin: "âœ… Fichaje programado ğŸ‰\nHora: {time}\nID de tarea: {id}",
    clocked_in_now: "Fichado correctamente âœ…",
    clocked_in_scheduled: "âœ… Fichado (programado) ğŸ¯\nHora: {time}",
    scheduled_failed: "âŒ Fallo el fichaje programado: {error}",
    clocknow_error: "âŒ Error: {error}",
    list_header: "Estos son tus fichajes programados ğŸ“‹",
    list_empty: "No hay fichajes programados ğŸ’¤",
    status_pending: "pendiente",
    status_executed: "ejecutado",
    status_failed: "fallido",
    cancel_usage: "Uso: /cancel <task-id> o /cancel all ğŸ§¹",
    cancel_not_found: "No encuentro ese id de tarea ğŸ¤”",
    cancel_ok: "Cancelado âœ…\nID de tarea: {id}",
    cancel_all_none: "No hay tareas pendientes para cancelar ğŸ’¤",
    cancel_all_ok: "Canceladas {count} tarea(s) âœ…ğŸ§¹",
    cancel_fail: "No pude cancelar esa tarea ğŸ˜¬",
    data_header: "ğŸ§¾ Datos de usuario",
    data_user_id: "ğŸ†” ID de usuario: {userId}",
    data_location: "ğŸ“ Ubicacion: {lat}, {long} (precision {accuracy})",
    data_domain: "ğŸ¢ Dominio: {domain}",
    data_cookies: "ğŸª Cookies:",
    data_cookie_hcmex: "- _hcmex_key: {status}",
    data_cookie_device: "- device_id: {status}",
    data_cookie_geo: "- geo: {status}",
    data_expires: "â³ Expira: {expires}",
    status_set: "ok",
    status_missing: "falta",
    set_timezone_usage: "Uso: /settimezone Europe/Madrid",
    set_timezone_invalid: "Zona horaria invalida. Ejemplo: /settimezone Europe/Madrid",
    set_timezone_ok: "âœ… Zona horaria actualizada a {tz}",
    doc_invalid: "Por favor envia un archivo .json",
    doc_too_large: "Archivo demasiado grande. Maximo 5MB.",
    doc_parsed: "âœ… Parseado correctamente!\n\n{details}",
    doc_error: "âŒ Error: {error}",
    doc_details: "lat long {lat}, {long}\n{link}\n\ndominio {domain}\nexpira el {expires}",
    location_updated: "ğŸ“ Ubicacion actualizada!\n{link}",
};

pub fn texts(lang: Lang) -> &'static Texts {
    match lang {
        Lang::En => &EN,
        Lang::Es => &ES,
    }
}

pub fn format_template(template: &str, vars: &[(&str, String)]) -> String {
    let mut out = template.to_string();
    for (key, value) in vars {
        out = out.replace(&format!("{{{key}}}"), value);
    }
    out
}
